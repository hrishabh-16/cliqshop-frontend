<div class="admin-container">
  <!-- Sidebar -->
  <div class="sidebar" [class.hidden]="!sidebarOpen">
    <div class="sidebar-header">
      <h1 class="title">Admin Panel</h1>
      <button (click)="toggleSidebar()" class="sidebar-toggle">
        <svg class="icon-close" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <nav class="sidebar-nav">
      <!-- Dashboard -->
      <div class="nav-item">
        <a routerLink="/admin/dashboard" routerLinkActive="active-link" class="nav-link">Dashboard</a>
      </div>

      <!-- Products Dropdown -->
      <div class="nav-item">
        <div (click)="toggleMenu('products')" class="nav-dropdown">
          <span>Products</span>
          <i class="icon-chevron" [class.rotate]="menus.products"></i>
        </div>
        <div class="dropdown-menu" *ngIf="menus.products">
          <a routerLink="/admin/products" [queryParams]="{view: 'list'}" class="dropdown-link">List</a>
          <a routerLink="/admin/products" [queryParams]="{view: 'edit'}" class="dropdown-link">Edit</a>
          <a routerLink="/admin/products" [queryParams]="{view: 'add'}" class="dropdown-link">Add</a>
        </div>
      </div>

      <!-- Categories Dropdown -->
      <div class="nav-item">
        <div (click)="toggleMenu('categories')" class="nav-dropdown">
          <span>Categories</span>
          <i class="icon-chevron" [class.rotate]="menus.categories"></i>
        </div>
        <div class="dropdown-menu" *ngIf="menus.categories">
          <a routerLink="/admin/categories" [queryParams]="{view: 'list'}" class="dropdown-link">List</a>
          <a routerLink="/admin/categories" [queryParams]="{view: 'edit'}" class="dropdown-link">Edit</a>
          <a routerLink="/admin/categories" [queryParams]="{view: 'add'}" class="dropdown-link">Add</a>
        </div>
      </div>

      <!-- Inventory Dropdown -->
      <div class="nav-item">
        <div (click)="toggleMenu('inventory')" class="nav-dropdown">
          <span>Inventory</span>
          <i class="icon-chevron" [class.rotate]="menus.inventory"></i>
        </div>
        <div class="dropdown-menu" *ngIf="menus.inventory">
          <a routerLink="/admin/reports" [queryParams]="{type: 'sales'}" class="dropdown-link">Sales Report</a>
          <a routerLink="/admin/reports" [queryParams]="{type: 'inventory'}" class="dropdown-link">Inventory Report</a>
        </div>
      </div>

      <!-- Profile -->
      <div class="nav-item">
        <a routerLink="/admin/profile" routerLinkActive="active-link" class="nav-link">My Profile</a>
      </div>

      <!-- Settings Dropdown -->
      <div class="nav-item">
        <div (click)="toggleMenu('settings')" class="nav-dropdown">
          <span>Settings</span>
          <i class="icon-chevron" [class.rotate]="menus.settings"></i>
        </div>
        <div class="dropdown-menu" *ngIf="menus.settings">
          <a routerLink="/admin/settings/profile" class="dropdown-link">Update Profile</a>
          <a routerLink="/admin/settings/password" class="dropdown-link">Change Password</a>
        </div>
      </div>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <header class="header">
      <button (click)="toggleSidebar()" class="sidebar-toggle">
        <svg class="icon-menu" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
      <div class="header-items">
        <div class="search-box">
          <input type="text" placeholder="Search..." class="search-input">
          <i class="icon-search"></i>
        </div>
        <div class="notifications">
          <i class="icon-bell"></i>
          <span *ngIf="notificationsCount > 0" class="notification-count">{{notificationsCount}}</span>
        </div>
        <div class="user-profile">
          <img [src]="userProfile.imageUrl || 'https://via.placeholder.com/40'" alt="Profile" class="profile-image">
          <span class="profile-name">{{userProfile.name || 'Admin'}}</span>
        </div>
      </div>
    </header>

    <!-- Dashboard Content -->
    <main class="dashboard-content">
      <!-- Quick Stats -->
      <div class="stats-grid">
        <div *ngFor="let stat of quickStats" class="stat-card">
         
          <div class="stat-info">
            <p class="stat-title">{{ stat.title }}</p>
            <h3 class="stat-value">{{ stat.value }}</h3>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="activity-grid">
        <!-- Recent Products -->
        <div class="activity-card">
          <div class="card-header">
            <h2 class="card-title">Recent Products</h2>
            <a routerLink="/admin/products" class="view-all-link">View All</a>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Price</th>
                  <th>Category</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of recentProducts">
                  <td>
                    <div class="product-info">
                      <img [src]="product.imageUrl || 'https://via.placeholder.com/40'" class="product-image">
                      <div class="product-details">
                        <div class="product-name">{{ product.name }}</div>
                        <div class="product-desc">{{ (product.description || '').slice(0, 30) }}...</div>
                      </div>
                    </div>
                  </td>
                  <td>₹{{ product.price }}</td>
                  <td>{{ product.categoryId }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="pagination-container">
            <nav class="pagination">
              <div class="pagination-info">
                Showing <span>{{ recentProducts.length }}</span> of <span>{{ totalProducts }}</span> results
              </div>
              <ul class="pagination-list">
                <li *ngFor="let page of productPages" class="pagination-item">
                  <a (click)="goToPage('products', page)">{{ page }}</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>

        <!-- Recent Orders -->
        <div class="activity-card">
          <div class="card-header">
            <h2 class="card-title">Recent Orders</h2>
            <a routerLink="/admin/orders" class="view-all-link">View All</a>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of recentOrders">
                  <td>#{{ order.orderId }}</td>
                  <td>{{ order.orderDate | date:'shortDate' }}</td>
                  <td>
                    <span [ngClass]="{
                      'status-pending': order.status === 'Pending',
                      'status-completed': order.status === 'Completed',
                      'status-cancelled': order.status === 'Cancelled'
                    }" class="status-label">
                      {{ order.status }}
                    </span>
                  </td>
                  <td>₹{{ order.totalPrice }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="pagination-container">
            <nav class="pagination">
              <div class="pagination-info">
                Showing <span>{{ recentOrders.length }}</span> of <span>{{ totalOrders }}</span> results
              </div>
              <ul class="pagination-list">
                <li class="pagination-item" *ngFor="let page of orderPages">
                  <a (click)="goToPage('orders', page)">{{ page }}</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
